---
name: ludeng
description: 太阳能路灯AI批量场景图生成系统，支持智能/手动配置，自动生成差异化小红书素材图
status: backlog
created: 2025-09-15T09:59:10Z
---

# PRD: 太阳能路灯 AI 批量场景图生成系统

## Executive Summary

太阳能路灯AI批量场景图生成系统是一个面向运营人员的Web工具，旨在自动化生成高质量、差异化的产品营销素材图。系统接收1张太阳能路灯产品图，通过AI技术生成"按组输出、组内4张、组间强差异化"的小红书内容素材图。

核心价值：
- **效率提升**：将手动制图从天级缩短到分钟级
- **质量保证**：AI增强提示词+专业图生成API确保输出质量
- **差异化算法**：智能避重确保素材多样性
- **成本控制**：可设预算上限，支持批量处理

## Problem Statement

### 当前痛点
1. **制图效率低**：运营人员手动制作产品场景图，单张耗时1-2小时
2. **素材同质化**：缺乏系统性差异化策略，容易产生视觉相似的内容
3. **场景局限性**：设计师对全国各地真实场景了解有限，难以创造地域化内容
4. **批量需求**：小红书等平台需要大量不同场景的素材，手工无法满足

### 为什么现在重要
- 小红书、抖音等平台对原创性要求越来越高
- 用户对本地化、真实场景的内容更有共鸣
- AI图生成技术已成熟，具备商业化应用条件

## User Stories

### 主要用户角色
**运营人员（Primary）**：负责小红书等平台内容创作的市场运营人员

### 核心用户旅程

#### 智能配置模式（推荐）
```
用户故事：作为运营同学，我想快速生成多样化素材
步骤：
1. 上传1张太阳能路灯产品图
2. 选择"智能配置"模式
3. 设置生成8组（32张图）
4. 点击生成，等待5-10分钟
5. 预览按组展示的结果
6. 一键下载zip包用于发布

验收标准：
- 8组背景完全不重复，差异化≥30%
- 每组4张通过天气/时间变化形成组内差异
- 总耗时<15分钟
- 图片质量达到发布标准
```

#### 手动配置模式（精准控制）
```
用户故事：作为运营同学，我需要针对特定地区生成素材
步骤：
1. 上传产品图
2. 选择"手动配置"
3. 指定：地域=河北邢台县，月份=7月，路面=土路，场景元素=三轮车
4. 生成1组4张图
5. 下载使用

验收标准：
- 生成图片准确反映指定的地域特征
- 月份季相正确（7月夏季特征明显）
- 场景元素自然融入，不突兀
```

#### 历史避重用户旅程
```
用户故事：作为长期用户，我不希望重复之前的素材
场景：
1. 用户已使用系统3个月，生成过50组素材
2. 再次生成时，系统自动检索历史组合
3. 确保新生成的组合与历史不重复
4. 如果组合池不足，提醒用户清理历史或扩大参数范围

验收标准：
- 历史组合检索准确率>99%
- 新组合与历史差异化≥25%
- 提供历史管理功能
```

## Requirements

### Functional Requirements

#### FR1: 产品图上传与处理
- 支持jpg/png/webp格式，≤5MB
- 建议分辨率≥1024px
- 自动校验图片质量和尺寸
- 支持预览和重新上传

#### FR2: 配置模式
**智能配置模式**
- 用户指定生成组数（1-12组）
- 系统自动分配地域、月份、路面、场景元素组合
- 应用差异化算法确保组间差异≥30%
- 支持"允许复用同省不同县"选项

**手动配置模式**
- 地域选择：省→市/县二级联动
- 月份选择：1-12月，影响季相描述
- 路面类型：土路/水泥路/柏油路/石板路（单选）
- 场景元素：多选，可选包含人物、载具、动物等

#### FR3: 元素池管理
- 维护地域数据库（≥100个县级条目）
- 每个地域包含：地貌、作物、植物、建筑、水系、地标
- 月份季相数据：作物状态、植物状态、气候特征
- 场景元素库：人物、载具、动物、劳作场景

#### FR4: Prompt生成与增强
- 结构化元素→自然语言转换
- DeepSeek API集成，生成增强提示词
- 支持地域本土化描述
- 组内差异通过天气/时间段变化

#### FR5: 图片生成
- nanobanana API集成
- 支持1024/1536分辨率选择
- 每组生成4种天气/时间变体：
  - 晴天清晨、晴天傍晚、阴天正午、小雨夜晚
- 冬季模板替换（寒带地区）

#### FR6: 差异化与去重
**组间差异化**
- 4维度差异算法：地域、月份、路面、场景元素
- 差异度阈值：≥50%（4维中≥2维不同）
- 智能重抽机制

**历史去重**
- 用户维度历史组合记录
- 完全相同组合直接丢弃
- 仅1维不同的高相似组合也丢弃

**视觉相似度检测**
- pHash汉明距离>12
- SSIM<0.9
- 超阈值触发重试策略

#### FR7: 质检与重试
- 自动质检失败图片
- 智能重试策略：微调天气/时间或场景元素
- 最大重试3次，失败则标记并继续
- 生成报告包含成功/失败统计

#### FR8: 结果管理
- 按组预览展示（4张并排）
- 显示组合摘要信息
- 支持单张/单组/全部下载
- zip打包下载，按组命名文件夹

### Non-Functional Requirements

#### NFR1: 性能要求
- 单组（4张图）生成时间<3分钟
- 并发支持：同时处理≤5个用户任务
- 系统响应时间<2秒（除生成过程）
- 文件上传<30秒（5MB图片）

#### NFR2: 质量标准
- 生成图片分辨率：1024x1024或1536x1536
- 产品主体清晰度>95%
- 背景与产品融合自然度>90%
- 用户满意度>85%

#### NFR3: 可靠性
- 系统可用性>99%
- 生成成功率>95%
- 数据持久化，不丢失历史记录
- 异常情况自动恢复

#### NFR4: 可扩展性
- 元素池支持热更新
- 支持新地域/场景元素添加
- API调用量可配置限制
- 支持多产品类型扩展（预留）

#### NFR5: 安全性
- 用户上传文件安全检查
- API密钥安全存储
- 用户数据隔离
- 敏感信息脱敏记录

## Success Criteria

### 定量指标
- **生成效率**：单组生成时间<3分钟（vs 手工8小时）
- **差异化达成率**：组间差异度>50%达成率>95%
- **质量合格率**：AI生成图片直接可用率>90%
- **用户满意度**：NPS>8.0
- **成本效益**：单张图生成成本<人工成本的10%

### 定性指标
- 用户反馈：素材多样性显著提升
- 运营效果：小红书等平台发布效果不低于手工图
- 技术稳定性：无重大bug，系统稳定运行

### 业务影响
- 运营人员制图工作量减少80%
- 素材库丰富度提升5倍
- 支撑小红书日发布量从10篇提升到50篇

## Constraints & Assumptions

### 技术约束
- 依赖DeepSeek API稳定性和响应速度
- nanobanana API的生成质量和并发限制
- 服务器存储空间限制（图片+历史数据）
- 网络带宽限制影响图片上传下载速度

### 业务约束
- MVP版本仅支持太阳能路灯一种产品
- 初期地域数据覆盖有限（约100个县）
- 单用户并发生成限制（防止资源滥用）
- API调用成本控制需求

### 假设条件
- DeepSeek API稳定可用，响应时间<10秒
- nanobanana生成质量满足商用标准
- 用户主要使用场景为批量生成（2-12组）
- 地域本土化对用户有显著价值

## Out of Scope

### 明确不包含的功能
- **多产品支持**：仅支持太阳能路灯，其他产品需后续版本
- **高级编辑功能**：不提供图片后期编辑、滤镜、水印等
- **社交媒体直发**：不直接对接小红书/抖音发布API
- **视频生成**：仅支持静态图片，不生成短视频
- **用户协作**：不支持多用户协作编辑功能

### 暂缓功能
- **移动端适配**：MVP仅支持Web端
- **批量历史导入**：不支持导入历史第三方素材
- **A/B测试功能**：不提供图片效果对比测试
- **详细数据分析**：仅基础使用统计，无深度分析

## Dependencies

### 外部依赖
- **DeepSeek API**：提示词增强服务，影响生成质量
- **nanobanana API**：核心图片生成服务，系统核心依赖
- **地域数据源**：需要准确的地理、农业、建筑等数据

### 内部依赖
- **前端开发团队**：负责用户界面和交互体验
- **后端开发团队**：负责差异化算法和API集成
- **运营团队**：提供元素池数据和用户反馈
- **测试团队**：负责质量保证和性能测试

### 技术依赖
- **服务器资源**：支持图片存储和处理的计算资源
- **数据库系统**：用户数据、历史记录、元素池存储
- **监控系统**：API调用监控、系统性能监控
- **备份系统**：用户数据和生成结果的备份策略

## Implementation Plan

### Phase 1: 核心功能开发（4周）
- 基础架构搭建
- 元素池数据库设计与填充
- DeepSeek API集成
- nanobanana API集成
- 差异化算法实现

### Phase 2: 用户界面开发（3周）
- 前端界面设计与实现
- 上传、配置、预览功能
- 进度展示和结果管理
- 基础的用户反馈收集

### Phase 3: 测试与优化（2周）
- 功能测试和性能测试
- 用户体验优化
- Bug修复和稳定性提升
- 上线前的最终验证

### Phase 4: 部署与监控（1周）
- 生产环境部署
- 监控系统配置
- 用户培训和文档
- 正式发布

## Risk Assessment

### 高风险
- **API依赖风险**：DeepSeek或nanobanana服务中断或质量下降
- **生成质量风险**：AI生成图片质量不稳定，影响用户满意度

### 中风险  
- **性能风险**：并发用户增加时系统响应变慢
- **成本风险**：API调用费用超出预算

### 低风险
- **数据风险**：元素池数据不够丰富
- **用户接受度风险**：用户学习成本较高

### 风险缓解策略
- API多供应商备选方案
- 本地缓存和队列机制
- 成本监控和预警系统
- 详细的用户使用指南